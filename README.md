# CsvUploadSample

## 概要
- 本POC（Proof of Concept）は、大量のCSVファイルを安全にアップロードする機能を検証することを目的としています。
- サーバー上でのCSVファイルのアップロードからバリデーション、保存、進捗確認、キャンセル機能を実装し検証を行っています。

## 主な機能

### CSVファイルのアップロード
- アップロード可能なファイル形式は.csv .zipに限定します。
- アップロード時に一意の `UploadID`を発行します。
- この`UploadID`はキャンセルリクエストをするときのキーとして管理します。

### バリデーション
- アップロードされたCSVファイルの内容をサーバー側で検証します。
- データ形式のチェックを行い、問題がある場合は行番号、項目名、エラー内容のエラーメッセージを返します。
- エラー内容については本実装ではエラー内容を明確に記載する必要があるかと思いますが、本POCでは「無効な形式です」で統一します。

### データ保存
- バリデーションを通過したデータは、一時テーブルに保存されます。
- 本番のテーブルに移行する際は、トランザクションを使用してデータの整合性を確保します。

### 進行状況の確認
- アップロードの進行状況をリアルタイムで確認できる機能を追加しています。
- 詳しくは [SignalR](https://dotnet.microsoft.com/en-us/apps/aspnet/signalr) 参照

### アップロードキャンセル
- ユーザーがアップロードプロセスを途中でキャンセルできる機能を実装しています。
- アップロード開始時に発行された UploadID をキーとして、それに紐づくアップロード処理を追跡します。
- キャンセルリクエストが送信された際には、UploadID をもとにサーバー側で該当するアップロード処理を特定し、例外（Exception）を発生させることで処理を中断し、キャンセルを実行します。

## 技術要素
- バックエンド: .NET 8 (C#) ,SignalR, Entity Framework,AutoMapper, CsvHelper
- フロントエンド: JavaScript (XHR、Bootstrap)